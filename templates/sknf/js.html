{% load static %}

<!-- jQuery 3 -->
<script src="{% static 'vendor/jquery/dist/jquery.min.js' %}"></script>
<!-- Bootstrap 3.3.7 -->
<script src="{% static 'vendor/bootstrap/dist/js/bootstrap.min.js' %}"></script>
<!-- SlimScroll -->
<script src="{% static 'vendor/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
<!-- FastClick -->
<script src="{% static 'vendor/fastclick/lib/fastclick.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'vendor/dist/js/adminlte.js' %}"></script>
<!-- Database Tables -->
<script src="{% static 'vendor/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendor/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% static 'vendor/dist/js/demo.js' %}"></script>
<!-- jQuery UI 1.11.4 -->
<script src="{% static 'vendor/jquery-ui/jquery-ui.min.js' %}"></script>
<!-- fullCalendar -->
<script src="{% static 'vendor/moment/moment.js' %}"></script>
<script src="{% static 'vendor/fullcalendar/dist/fullcalendar.min.js' %}"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.16.0/jquery.validate.min.js"></script>
<script src="{% static 'sknf/js/toastr.min.js' %}"></script>
<script src="{% static 'sknf/js/select2.full.min.js' %}"></script>
<script src="{% static 'sknf/js/bootstrap-datepicker.min.js' %}"></script>
<script src="{% static 'sknf/js/tempusdominus-bootstrap-3.js' %}"></script>
<script src="{% static 'sknf/js/cropper.min.js' %}"></script>
<!--<script src="{% static 'sknf/js/jquery-cropper.min.js' %}"></script>-->
<script>

    function initDatepicker(){
        $('.datepicker:not(".dp-inited")').datepicker({
            'format' : 'dd-mm-yyyy'
        }).addClass("dp-inited");
    }

    $(".customer-select2").select2();
    function goBack() {
        window.history.back();
    }
    $(document).ready(function () {
        $('.sidebar-menu').tree();
        initDatepicker();
        initSelect2(); })
</script>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function(e) {
                $('.preview-show').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    $(".img-preview").change(function() {
        readURL(this);
    });

    $(function () {
        $('.data-table').DataTable({
            'paging'      : true,
            'lengthChange': false,
            'searching'   : false,
            'ordering'    : true,
            'info'        : true,
            'autoWidth'   : false
        });


        $(".shop-search").hide();
        $("#advancedButton").click(function(event){
            $(".shop-search").toggle('slow');
            event.preventDefault();
        });

        $(".close-search").click(function(event){
            $(".shop-search").hide('slow');
            event.preventDefault();
        });

        $(function(){
            $('#addMoreDoc').on('click', addRow);
            $(document).on('click', '.removeDoc', function() {
                var trIndex = $(this).closest("tr").index();
                if(trIndex>1) {
                    $(this).closest("tr").remove();
                } else {
                    alert("Sorry!! Can't remove first row!");
                }
            });
        });

        var copydate = $('.copydate').val();
        $('.copydate').on('change', function() {
            var data = this.value;
            var arr = data.split("-");
            arr = arr.reverse();
            datestring = arr.join('-')
            $('.pastedate').val(datestring);
        });
    });

    $(".js-genarate-password").click(function () {
        $("#modal-password-generator").modal("show");
        $("#generate_password_input_field").val('');
        $("#generate_password_confirm"). prop("checked", false);

    });



    $('#generate_password_confirm').click(function (event) {

        //check if checkbox is checked
        if ($(this).is(':checked')) {
            if($('#generate_password_input_field').val()){
                $('#use-password').attr('disabled', false); //enable input
            }
            else{
                event.stopPropagation();
                event.preventDefault();
                alert('First Generate Password.');
            }

        }
        else {
            $('#use-password').attr('disabled', true); //disable input
        }
    });

    $('#use-password').click(function (event) {
        $("#modal-password-generator").modal("hide");
        var generated_password = $('#generate_password_input_field').val();
        $( "#generated-pass" ).val(generated_password)
        $( "#confirm-generated-pass" ).val(generated_password)
    });
    $(".toggle-password").click(function() {

        $(this).toggleClass("fa-eye fa-eye-slash");
        var input = $("#generated-pass");
        var input2 = $('#confirm-generated-pass');
        if (input.attr("type") == "password") {
            input.attr("type", "text");
            input2.attr("type", "text");
        } else {
            input.attr("type", "password");
            input2.attr("type", "password");
        }
    });

    $(function(){
        var url = window.location.pathname,
            urlRegExp = new RegExp(url.replace(/\/$/,'') + "$"); // create regexp to match current url pathname and remove trailing slash if present as it could collide with the link in navigation in case trailing slash wasn't present there
        // now grab every link from the navigation
        $('.sidebar-menu a').each(function(){
            // and test its normalized href against the url pathname regexp
            if(urlRegExp.test(this.href.replace(/\/$/,''))){
                $(this).parent().addClass('active');
            }
        });
    });

</script>

