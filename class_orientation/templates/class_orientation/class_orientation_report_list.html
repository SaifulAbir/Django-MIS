{% extends 'sknf/base.html' %}
{% block body_block %}

<!-- Main content -->
<section class="content-header" style="padding-top:60px">
    <h1>
        Peer Education
    </h1>
</section>
<section class="content">

    <!-- Main content -->
    <div class="box">
        <div class="box-header">
        </div>
        <!-- /.box-header -->
        <div class="box-body table-responsive">
            <table   id="example1" class=" class-orientation-table table table-bordered table-striped">
                <thead>
                <tr>
                    <th class="col-sm-3">School</th>
                    <th class="col-sm-1">Date</th>
                    <th class="col-sm-2">Place</th>
                    <th class="col-sm-2">Topic</th>
                    <th class="col-sm-2">Division</th>
                    <th class="col-sm-2">District</th>
                </tr>
                </thead>
                <tbody>
                {% for class_orientation in classorientation_list %}
                <tr>
                    <td>{{ class_orientation.school }}</td>
                    <td>{{ class_orientation.created_date }}</td>
                    <td>{{ class_orientation.get_place_display }}</td>
                    <td>
                        {% for topic in class_orientation.topic.all %}
                        {% if forloop.last %}
                        {{topic.name}}
                        {% else %}
                        {{topic.name}},
                        {% endif %}
                        {% endfor %}
                    </td>
                    <td>{{ class_orientation.school.division }}</td>
                    <td>{{ class_orientation.school.district }}</td>
                </tr>
                {% endfor %}
                </tbody>
                <tfoot>

                </tfoot>
            </table>
            <p class="table-information">Showing {{ classorientation_list.start_index }} to {{ classorientation_list.end_index }} of {{ classorientation_list.paginator.count }} entries</p>
            {% include 'class_orientation/_modal.html' %}
            <ul class="pagination" style="float: right">

                {% if classorientation_list.has_previous %}
                <li><a class="paginator" href="?page={{ classorientation_list.previous_page_number }}"><i class="fa fa-chevron-left" aria-hidden="true"></i></a></li>
                {% else %}
                <li class="disabled"><span><i class="fa fa-chevron-left" aria-hidden="true"></i></span></li>
                {% endif %}

                {% if classorientation_list.number|add:'-4' > 1 %}
                <li><a class="paginator" href="?page={{ classorientation_list.number|add:'-5' }}">&hellip;</a></li>
                {% endif %}

                {% for i in classorientation_list.paginator.page_range %}
                {% if classorientation_list.number == i %}
                <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                {% elif i > classorientation_list.number|add:'-5' and i < classorientation_list.number|add:'5' %}
                <li><a class="paginator" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
                {% endfor %}

                {% if classorientation_list.paginator.num_pages > classorientation_list.number|add:'4' %}
                <li><a class="paginator" href="?page={{ classorientation_list.number|add:'5' }}">&hellip;</a></li>
                {% endif %}

                {% if classorientation_list.has_next %}
                <li><a class="paginator" href="?page={{ classorientation_list.next_page_number }}"><i class="fa fa-chevron-right" aria-hidden="true"></i></a></li>
                {% else %}
                <li class="disabled"><span><i class="fa fa-chevron-right" aria-hidden="true"></i></span></li>
                {% endif %}

            </ul>
        </div>
    </div>
    <!-- /.content -->
</section>
{% endblock %}
{% block extra_js %}
<script type="text/javascript">
    $(function () {
        $('#reports, .peer-education-menu').addClass('active');
        $("#reports").addClass("menu-open");
        $("#reports .treeview-menu").css("display", "block");
        $('.box .box-body .class-orientation-table').DataTable({
            'paging'      : false,
            'lengthChange': false,
            'searching'   : false,
            'ordering'    : true,
            'info'        : false,
            'autoWidth'   : false,
            'destroy'     : true
        });
        $(".box").on('click', '.paginator', function (e) {
            e.preventDefault();
            var pageUrl = $(location).attr('href');
            var addressValue = $(this).attr("href");
            $.ajax({
                type: 'get',
                url: pageUrl+addressValue,
                success: function (data) {
                    $(".box-body").html(data.html_class_orientation_report);
                    $('.box .box-body .class-orientation-table').DataTable({
                        'paging'      : false,
                        'lengthChange': false,
                        'searching'   : false,
                        'ordering'    : true,
                        'info'        : false,
                        'autoWidth'   : false,
                        'destroy'     : true
                    });
                }
            });
        });
    });
</script>
{% endblock %}